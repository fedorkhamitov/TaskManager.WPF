<Window x:Class="TaskManager.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Task Manager - Управление задачами"
        Height="600"
        Width="900"
        WindowStartupLocation="CenterScreen">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <!-- ЗАГОЛОВОК -->
        <Border Grid.Row="0" Background="#2C3E50">
            <StackPanel Margin="15">
                <TextBlock Text="📋 Task Manager"
                           FontSize="24"
                           FontWeight="Bold"
                           Foreground="White"
                           Margin="0,0,0,5" />
                <TextBlock Text="Простое CRUD-приложение на WPF с MVVM-архитектурой"
                           FontSize="12"
                           Foreground="#ECF0F1" />
            </StackPanel>
        </Border>

        <!-- ПАНЕЛЬ УПРАВЛЕНИЯ -->
        <Border Grid.Row="1" Background="White" Margin="0,0,0,1">
            <StackPanel Margin="15">

                <!-- Поиск -->
                <TextBlock Text="🔍 Поиск задач:" FontWeight="Bold" Margin="0,0,0,5" />
                <TextBox Text="{Binding SearchText, UpdateSourceTrigger=PropertyChanged}"
                         Height="30"
                         FontSize="14"
                         Margin="0,0,0,10" />

                <!-- Фильтры -->
                <TextBlock Text="🎯 Фильтр по статусу:" FontWeight="Bold" Margin="0,0,0,5" />
                <StackPanel Orientation="Horizontal" Margin="0,0,0,10">
                    <Button Content="Все задачи"
                            Command="{Binding ShowAllCommand}"
                            Width="120"
                            Height="35"
                            Margin="0,0,5,0"
                            Background="#3498DB"
                            Foreground="White"
                            FontWeight="Bold" />

                    <Button Content="✓ Активные"
                            Command="{Binding ShowActiveCommand}"
                            Width="120"
                            Height="35"
                            Margin="0,0,5,0"
                            Background="#27AE60"
                            Foreground="White"
                            FontWeight="Bold" />

                    <Button Content="✔ Завершённые"
                            Command="{Binding ShowCompletedCommand}"
                            Width="120"
                            Height="35"
                            Background="#E74C3C"
                            Foreground="White"
                            FontWeight="Bold" />
                </StackPanel>

                <!-- Действия -->
                <TextBlock Text="⚙️ Действия:" FontWeight="Bold" Margin="0,0,0,5" />
                <StackPanel Orientation="Horizontal">
                    <Button Content="➕ Добавить"
                            Command="{Binding AddTaskCommand}"
                            Width="120"
                            Height="35"
                            Margin="0,0,5,0"
                            Background="#8E44AD"
                            Foreground="White"
                            FontWeight="Bold" />

                    <Button Content="✏️ Редактировать"
                            Command="{Binding EditTaskCommand}"
                            Width="120"
                            Height="35"
                            Margin="0,0,5,0"
                            Background="#F39C12"
                            Foreground="White"
                            FontWeight="Bold" />

                    <Button Content="🗑️ Удалить"
                            Command="{Binding DeleteTaskCommand}"
                            Width="120"
                            Height="35"
                            Margin="0,0,5,0"
                            Background="#E74C3C"
                            Foreground="White"
                            FontWeight="Bold" />

                    <Button Content="✅ Переключить"
                            Command="{Binding ToggleStatusCommand}"
                            Width="120"
                            Height="35"
                            Background="#16A085"
                            Foreground="White"
                            FontWeight="Bold" />
                </StackPanel>
            </StackPanel>
        </Border>

        <!-- ТАБЛИЦА С ЗАДАЧАМИ -->
        <DataGrid Grid.Row="2"
                  ItemsSource="{Binding FilteredTasks}"
                  SelectedItem="{Binding SelectedTask}"
                  AutoGenerateColumns="False"
                  CanUserAddRows="False"
                  CanUserDeleteRows="False"
                  Background="White"
                  GridLinesVisibility="Horizontal"
                  Margin="10"
                  AlternatingRowBackground="#F9F9F9">

            <DataGrid.Columns>
                <DataGridTextColumn Header="ID"
                                    Binding="{Binding Id}"
                                    Width="50"
                                    IsReadOnly="True" />

                <DataGridTextColumn Header="Название задачи"
                                    Binding="{Binding Title}"
                                    Width="*"
                                    IsReadOnly="True" />

                <DataGridTextColumn Header="Описание"
                                    Binding="{Binding Description}"
                                    Width="2*"
                                    IsReadOnly="True" />

                <DataGridTextColumn Header="Приоритет"
                                    Binding="{Binding Priority}"
                                    Width="80"
                                    IsReadOnly="True" />

                <DataGridTextColumn Header="Статус"
                                    Binding="{Binding Status}"
                                    Width="80"
                                    IsReadOnly="True" />

                <DataGridTextColumn Header="Создана"
                                    Binding="{Binding CreatedDate, StringFormat='dd.MM.yyyy HH:mm'}"
                                    Width="130"
                                    IsReadOnly="True" />
            </DataGrid.Columns>
        </DataGrid>

        <!-- СТАТУСНАЯ СТРОКА -->
        <StatusBar Grid.Row="3" Background="#2C3E50">
            <StatusBarItem>
                <TextBlock Foreground="White">
                    <Run Text="Задач отображено: " />
                    <Run Text="{Binding FilteredTasks.Count, Mode=OneWay}" FontWeight="Bold" />
                    <Run Text=" | Всего задач: " />
                    <Run Text="{Binding Tasks.Count, Mode=OneWay}" FontWeight="Bold" />
                </TextBlock>
            </StatusBarItem>
        </StatusBar>
    </Grid>
</Window>
